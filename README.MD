# Task Manager & Portal do Cliente

## üìù Descri√ß√£o

Esta √© uma aplica√ß√£o completa para gest√£o de projetos e tarefas internas, combinada com um portal de suporte ao cliente. A plataforma permite que a equipa interna organize projetos e tarefas, enquanto os clientes podem abrir, acompanhar e interagir com chamados de suporte, tudo num √∫nico sistema integrado.

## ‚ú® Funcionalidades Principais

A plataforma est√° dividida em duas grandes √°reas:

### Painel de Administra√ß√£o (AdminJS)

  - **Gest√£o Completa:** Interface para criar, ler, atualizar e apagar (CRUD) Projetos, Tarefas, Clientes, Usu√°rios e Chamados.
  - **Dashboard de Gest√£o:** Painel inicial com gr√°ficos de resumo sobre o estado das tarefas internas e dos chamados de clientes.
  - **Logs de Atividade:** Um hist√≥rico detalhado em cada chamado, registando todas as altera√ß√µes de status e de respons√°vel, para m√°xima rastreabilidade.
  - **Sistema de Relat√≥rios Avan√ßado:** Uma p√°gina dedicada por projeto para gerar relat√≥rios de:
      - **Horas Gastas:** Com filtros por m√™s, trimestre e ano.
      - **Lista de Chamados:** Filtrados por per√≠odo.
  - **Exporta√ß√£o de Relat√≥rios:** Capacidade de exportar qualquer relat√≥rio para os formatos **CSV**, **Excel (.xlsx)** e **PDF**, com um layout profissional e o log√≥tipo da empresa.

### Portal do Cliente

  - **Autentica√ß√£o Segura:** Login com Email/Senha e integra√ß√£o com provedores sociais (Google e Microsoft).
  - **Dashboard do Cliente:** P√°gina inicial personalizada com um resumo do estado dos seus chamados e do consumo de horas de suporte.
  - **Sistema de Chamados (Tickets):**
      - Abertura de novos chamados com t√≠tulo, descri√ß√£o, prioridade e anexos.
      - Acompanhamento do status e do hist√≥rico de todos os chamados do seu projeto.
      - Comunica√ß√£o com a equipa atrav√©s de um hist√≥rico de coment√°rios.
  - **Gest√£o de Perfil:** P√°gina "Meu Perfil" onde o cliente pode ver os seus dados, alterar a sua senha e fazer o upload de uma foto de perfil.
  - **Controlo de Horas Mensal:** O sistema de horas de suporte contratadas reinicia automaticamente a cada m√™s, com base no tempo registado em cada sess√£o de trabalho.

## üõ†Ô∏è Tecnologias Utilizadas (Stack)

  - **Backend:** Node.js, Express.js
  - **Base de Dados:** PostgreSQL com Sequelize (ORM)
  - **Painel de Admin:** AdminJS com React
  - **Portal do Cliente:** EJS (Embedded JavaScript templates)
  - **Autentica√ß√£o:** Passport.js
  - **Upload de Ficheiros:** AWS S3, com `multer` e `multer-s3`
  - **Gera√ß√£o de PDF:** Puppeteer
  - **Gera√ß√£o de Excel/CSV:** `exceljs`, `json2csv`

## üöÄ Requisitos e Instala√ß√£o

Para configurar e executar este projeto num novo ambiente de desenvolvimento.

#### 1\. Pr√©-requisitos

  - **Node.js** (vers√£o 18 ou superior)
  - **Yarn** ou **NPM**
  - Um servidor de **PostgreSQL** a correr localmente ou na nuvem

#### 2\. Clonar o Reposit√≥rio

```bash
git clone <url-do-seu-repositorio>
cd <pasta-do-projeto>
```

#### 3\. Instalar Depend√™ncias

```bash
npm install
```

ou

```bash
yarn install
```

#### 4\. Configurar a Base de Dados

  - Crie uma nova base de dados no seu servidor PostgreSQL (ex: `task_manager_db`).
  - Certifique-se de que tem um utilizador e senha com permiss√µes para aceder a esta base de dados.

#### 5\. Configurar as Vari√°veis de Ambiente

  - Na raiz do projeto, crie um ficheiro chamado `.env`.
  - Copie o conte√∫do do modelo abaixo e preencha com as suas pr√≥prias credenciais.

#### 6\. Executar as Migra√ß√µes da Base de Dados

Este comando ir√° criar todas as tabelas necess√°rias na sua base de dados.

```bash
npm run db:migrate
```

#### 7\. (Opcional) Popular com Dados Iniciais

Se tiver ficheiros de "seed" para criar dados iniciais (como um utilizador administrador), execute:

```bash
npm run db:seed
```

#### 8\. Iniciar o Servidor de Desenvolvimento

```bash
npm run dev
```

  - A aplica√ß√£o estar√° a correr em `http://localhost:5000` (ou na porta que definir).
  - O AdminJS estar√° acess√≠vel em `http://localhost:5000/admin`.
  - O Portal do Cliente estar√° em `http://localhost:5000/portal`.

## ‚öôÔ∏è Vari√°veis de Ambiente (Modelo para `.env`)

Copie o bloco abaixo para o seu ficheiro `.env` e substitua os valores.

```env
# Base de Dados PostgreSQL
DB_HOST=localhost
DB_USER=postgres
DB_PASS=sua_senha_do_postgres
DB_NAME=task_manager_db

# Segredo para Sess√µes da Aplica√ß√£o (use um gerador de strings aleat√≥rias longo)
SECRET=seu_segredo_super_secreto_para_sessoes

# Credenciais AWS S3 para Upload de Ficheiros
AWS_ACCESS_KEY_ID=sua_access_key_id_da_aws
AWS_SECRET_ACCESS_KEY=sua_secret_access_key_da_aws
AWS_REGION=sua_regiao_da_aws (ex: us-east-1)
AWS_BUCKET=nome_do_seu_bucket_s3

# Credenciais para Envio de Email (ex: Mailtrap para desenvolvimento)
MAIL_HOST=smtp.mailtrap.io
MAIL_PORT=2525
MAIL_USER=seu_usuario_mailtrap
MAIL_PASS=sua_senha_mailtrap

# Email do Administrador para receber notifica√ß√µes
ADMIN_EMAIL=seu-email-admin@exemplo.com

# Autentica√ß√£o Social (OAuth 2.0)
GOOGLE_CLIENT_ID=seu_id_de_cliente_google
GOOGLE_CLIENT_SECRET=seu_google_client_secret
MICROSOFT_CLIENT_ID=seu_id_de_cliente_microsoft
MICROSOFT_CLIENT_SECRET=seu_segredo_de_cliente_microsoft

# URL Base da Aplica√ß√£o (importante para produ√ß√£o)
BASE_URL=http://localhost:5000
```

## üìú Scripts Dispon√≠veis

  - `npm run dev`: Inicia a aplica√ß√£o em modo de desenvolvimento com `nodemon`.
  - `npm run build`: Transpila o c√≥digo da pasta `src` para a pasta `dist` para produ√ß√£o.
  - `npm run start`: Inicia a aplica√ß√£o em modo de produ√ß√£o a partir da pasta `dist`.
  - `npm run db:migrate`: Aplica todas as migra√ß√µes pendentes na base de dados.
  - `npm run db:undo`: Reverte a √∫ltima migra√ß√£o aplicada.
  - `npm run db:seed`: Popula a base de dados com dados iniciais.